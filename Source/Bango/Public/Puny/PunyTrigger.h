#pragma once

#include "Puny/PunyTriggerSignal.h"

#include "PunyTrigger.generated.h"

class UPunyEvent;
class UPunyEventComponent;

UDELEGATE()
DECLARE_DYNAMIC_MULTICAST_DELEGATE_TwoParams(FPunyTriggerSignalDelegate, UPunyTrigger*, Trigger, FPunyTriggerSignal, Signal);

UCLASS(Abstract, DefaultToInstanced, EditInlineNew)
class BANGO_API UPunyTrigger : public UObject
{
	GENERATED_BODY()
	
	// ============================================================================================
	// CONSTRUCTION
	// ============================================================================================
	
	// ============================================================================================
	// SETTINGS
	// ============================================================================================
	
	// -------------------------------------------------------------------
	// Settings Getters/Setters
	// -------------------------------------------------------------------

	// ============================================================================================
	// STATE
	// ============================================================================================

	// -------------------------------------------------------------------
	// State Getters/Setters
	// -------------------------------------------------------------------

	// -------------------------------------------------------------------
	// Delegates/Events
	// -------------------------------------------------------------------
private:
	FPunyTriggerSignalDelegate TriggerSignal;
	
	// ============================================================================================
	// METHODS
	// ============================================================================================
public:
	void SetEnabled(bool bEnabled);

	void RegisterEvent(UPunyEvent* Event);

	void UnregisterEvent(UPunyEvent* Event);
	
protected:
	UFUNCTION(BlueprintNativeEvent)
	void Enable();

	UFUNCTION(BlueprintNativeEvent)
	void Disable();

	void SendSignal(FPunyTriggerSignal Signal);

protected:
	UPunyEventComponent* GetEventComponent();

	AActor* GetActor();
	
	// ============================================================================================
	// EDITOR SETTINGS
	// ============================================================================================

	// -------------------------------------------------------------------
	// Editor Settings Getters/Setters
	// -------------------------------------------------------------------

	// ============================================================================================
	// EDITOR STATE
	// ============================================================================================

	// -------------------------------------------------------------------
	// Editor State Getters/Setters
	// -------------------------------------------------------------------

	// ============================================================================================
	// EDITOR METHODS
	// ============================================================================================
};
